(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a,r=t(1),i=t.n(r),c=t(3),s=t.n(c),o=(t(9),t(4));t(10),t(11),t(12);!function(e){e[e.Unknown=0]="Unknown",e[e.Clear=1]="Clear",e[e.Danger=2]="Danger",e[e.Exploded=3]="Exploded",e[e.Flagged=4]="Flagged"}(a||(a={}));var u=t(0),l=function(e,n){var t="";return t=e===a.Danger?"".concat(a[e]).concat(n||""):a[e],"Cell  ".concat(t)},d=function(e){return Object(u.jsx)("div",{"data-testid":"cell",className:l(e.status,e.neighboringMines),onClick:function(){return e.onClick(e.index)},onContextMenu:function(n){e.onRightClick(e.index),n.preventDefault()},children:Object(u.jsx)("p",{children:e.neighboringMines})})},g=function(e){var n={gridTemplateColumns:"auto ".repeat(Math.sqrt(e.size))};return Object(u.jsx)("div",{className:"Board",style:n,"data-testid":"board",children:e.cells.map((function(n){return Object(u.jsx)(d,{index:n.index,onClick:e.onClick,onRightClick:e.onRightClick,status:n.data.status,neighboringMines:n.data.neighboringMines},n.index)}))})};function h(e){return Object(u.jsxs)("header",{className:"App-header","data-testid":"header",children:[e.isWin&&!e.isGameover?"You won! - ":"",e.isGameover?"Game over - ":"","Score: ",e.score,Object(u.jsx)("br",{}),"High score: ",e.highScore,Object(u.jsx)("br",{}),"Win streak: ",e.winStreak,Object(u.jsx)("br",{}),"Mines on this game: ",e.mines]})}var f=function(e,n,t,a,r){return{size:e,cells:m(e,n),mines:n,score:t||0,highScore:a||0,win:!1,winStreak:r||0,gameover:!1}},m=function(e,n){if(n>e)throw RangeError("mineCount should not be larger than size");for(var t=Math.sqrt(e),r=Array.from({length:e},(function(e,n){return{index:n,x:n%t,y:Math.floor(n/t),data:{mine:!1,status:a.Unknown}}})),i=0;i<n;)for(var c=0;c<e&&!(i>=n);c++)if(!r[c].data.mine){var s=Math.random()<.2;r[c].data.mine=s,s&&i++}return r},j=function(e,n,t){var r=Object.assign({},e),i=v(n,t);return r.data.status=i>0?a.Danger:a.Clear,r.data.neighboringMines=i,r},b=function(e){return!e.gameover&&e.cells.filter((function(e){return e.data.status===a.Unknown})).length+e.cells.filter((function(e){return e.data.status===a.Flagged})).length===e.mines},v=function(e,n){var t=e[n];return e.filter((function(e){return x(t,e)})).filter((function(e){return e.data.mine})).length},x=function(e,n){var t=e.x,a=e.y;return[t-1,t,t+1].includes(n.x)&&[a-1,a+1].includes(n.y)||[t-1,t+1].includes(n.x)&&a===n.y},k=function(e,n){var t=e[n];return e.map((function(n){return x(t,n)&&n.data.status!==a.Flagged&&!n.data.mine?j(n,e,n.index):n}))},w=function(e,n){for(var t=e,r=e.filter((function(e){return e.data.status===a.Clear})).length,i=0;r!==i;){r=i;for(var c=0;c<e.length;c++){var s=c%e.length;e[s].data.status===a.Clear&&(t=k(e,s))}i=e.filter((function(e){return e.data.status===a.Clear})).length}return t},C=(t(14),function(e){return Object(u.jsxs)("div",{children:[e.gameState.win&&"Congratulations!",e.gameState.gameover&&"Better luck next time...",Object(u.jsx)("div",{className:"Button-container",children:e.gameState.win&&Object(u.jsx)("button",{className:"Button next",onClick:e.onClickNext,children:"Next game"})}),Object(u.jsx)("div",{className:"Button-container",children:e.gameState.gameover&&Object(u.jsx)("button",{className:"Button restart",onClick:e.onClickRestart,children:"Restart"})})]})}),O={size:0,cells:[],mines:0,score:0,highScore:0,win:!1,winStreak:0,gameover:!1};var S=function(){var e=Object(r.useState)(O),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(r.useCallback)((function(){i(f(9,1))}),[]);return Object(r.useEffect)((function(){return c()}),[c]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(h,{isWin:t.win,isGameover:t.gameover,score:t.score,winStreak:t.winStreak,highScore:t.highScore,mines:t.mines}),Object(u.jsx)("div",{className:"Board-container",children:Object(u.jsx)(g,{size:t.size,cells:t.cells,onClick:function(e){i(function(e,n){if(e.win||e.gameover)return e;var t=Object.assign({},e);return t.cells.forEach((function(r){r.index===n&&r.data.status!==a.Flagged&&(r.data.mine?(r.data.status=a.Exploded,t.gameover=!0):r.data.status===a.Unknown&&(r=j(r,e.cells,n),t.score+=100,r.data.status===a.Clear&&(t.cells=w(e.cells,n))))})),b(t)&&(t.win=!0,t.winStreak++,t.score>t.highScore&&(t.highScore=t.score)),t}(t,e))},onRightClick:function(e){i(function(e,n){if(e.win||e.gameover)return e;var t=Object.assign({},e);return t.cells.forEach((function(e){e.index===n&&(e.data.status=e.data.status===a.Flagged?a.Unknown:a.Flagged)})),t}(t,e))}})}),Object(u.jsx)(C,{gameState:t,onClickNext:function(){var e=f(Math.pow(Math.sqrt(t.size)+1,2),Math.round(1.5*t.mines),t.score,t.highScore,t.winStreak);i(e)},onClickRestart:function(){var e=f(9,1,0,t.highScore,0);i(e)}})]})};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.fbd6093b.chunk.js.map