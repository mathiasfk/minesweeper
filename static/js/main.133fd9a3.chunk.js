(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var r,a=t(1),i=t.n(a),c=t(3),s=t.n(c),o=(t(9),t(4));t(10),t(11),t(12);!function(e){e[e.Unknown=0]="Unknown",e[e.Clear=1]="Clear",e[e.Danger=2]="Danger",e[e.Exploded=3]="Exploded",e[e.Flagged=4]="Flagged"}(r||(r={}));var l=t(0),u=function(e){return Object(l.jsx)("div",{"data-testid":"cell",className:"Cell  ".concat(r[e.status]).concat(e.neighboringMines||""),onClick:function(){return e.onClick(e.index)},onContextMenu:function(n){e.onRightClick(e.index),n.preventDefault()},children:Object(l.jsx)("p",{children:e.neighboringMines})})},d=function(e){var n={gridTemplateColumns:"auto ".repeat(Math.sqrt(e.size))};return Object(l.jsx)("div",{className:"Board",style:n,"data-testid":"board",children:e.cells.map((function(n){return Object(l.jsx)(u,{index:n.index,onClick:e.onClick,onRightClick:e.onRightClick,status:n.data.status,neighboringMines:n.data.neighboringMines},n.index)}))})};function g(e){return Object(l.jsxs)("header",{className:"App-header","data-testid":"header",children:[e.isWin&&!e.isGameover?"You won! - ":"",e.isGameover?"Game over - ":"","Score: ",e.score,Object(l.jsx)("br",{}),"High score: ",e.highScore,Object(l.jsx)("br",{}),"Win streak: ",e.winStreak,Object(l.jsx)("br",{}),"Mines on this game: ",e.mines]})}var h=function(e,n,t,r,a){return{size:e,cells:f(e,n),mines:n,score:t||0,highScore:r||0,win:!1,winStreak:a||0,gameover:!1}},f=function(e,n){if(n>e)throw RangeError("mineCount should not be larger than size");for(var t=Math.sqrt(e),a=Array.from({length:e},(function(e,n){return{index:n,x:n%t,y:Math.floor(n/t),data:{mine:!1,status:r.Unknown}}})),i=0;i<n;)for(var c=0;c<e&&!(i>=n);c++)if(!a[c].data.mine){var s=Math.random()<.2;a[c].data.mine=s,s&&i++}return a},m=function(e,n,t){var a=Object.assign({},e),i=b(n,t);return a.data.status=i>0?r.Danger:r.Clear,a.data.neighboringMines=i,a},j=function(e){return!e.gameover&&e.cells.filter((function(e){return e.data.status===r.Unknown})).length+e.cells.filter((function(e){return e.data.status===r.Flagged})).length===e.mines},b=function(e,n){var t=e[n];return e.filter((function(e){return x(t,e)})).filter((function(e){return e.data.mine})).length},x=function(e,n){var t=e.x,r=e.y;return[t-1,t,t+1].includes(n.x)&&[r-1,r+1].includes(n.y)||[t-1,t+1].includes(n.x)&&r===n.y},v=function(e,n){var t=e[n];return e.map((function(n){return x(t,n)&&!n.data.mine?m(n,e,n.index):n}))},k=function(e,n){for(var t=e,a=e.filter((function(e){return e.data.status===r.Clear})).length,i=0;a!==i;){a=i;for(var c=0;c<e.length;c++){var s=c%e.length;e[s].data.status===r.Clear&&(t=v(e,s))}i=e.filter((function(e){return e.data.status===r.Clear})).length}return t},C=(t(14),function(e){return Object(l.jsxs)("div",{children:[e.gameState.win&&"Congratulations!",e.gameState.gameover&&"Better luck next time...",Object(l.jsx)("div",{className:"Button-container",children:e.gameState.win&&Object(l.jsx)("button",{className:"Button next",onClick:e.onClickNext,children:"Next game"})}),Object(l.jsx)("div",{className:"Button-container",children:e.gameState.gameover&&Object(l.jsx)("button",{className:"Button restart",onClick:e.onClickRestart,children:"Restart"})})]})}),w={size:0,cells:[],mines:0,score:0,highScore:0,win:!1,winStreak:0,gameover:!1};var O=function(){var e=Object(a.useState)(w),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useCallback)((function(){i(h(9,1))}),[]);return Object(a.useEffect)((function(){return c()}),[c]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(g,{isWin:t.win,isGameover:t.gameover,score:t.score,winStreak:t.winStreak,highScore:t.highScore,mines:t.mines}),Object(l.jsx)("div",{className:"Board-container",children:Object(l.jsx)(d,{size:t.size,cells:t.cells,onClick:function(e){i(function(e,n){if(e.win||e.gameover)return e;var t=Object.assign({},e);return t.cells.forEach((function(a){a.index===n&&(a.data.mine?(a.data.status=r.Exploded,t.gameover=!0):(a=m(a,e.cells,n),t.score+=100,a.data.status===r.Clear&&(t.cells=k(e.cells,n))))})),j(t)&&(t.win=!0,t.winStreak++,t.score>t.highScore&&(t.highScore=t.score)),t}(t,e))},onRightClick:function(e){i(function(e,n){if(e.win||e.gameover)return e;var t=Object.assign({},e);return t.cells.forEach((function(e){e.index===n&&(e.data.status=e.data.status===r.Flagged?r.Unknown:r.Flagged)})),t}(t,e))}})}),Object(l.jsx)(C,{gameState:t,onClickNext:function(){var e=h(Math.pow(Math.sqrt(t.size)+1,2),Math.round(1.5*t.mines),t.score,t.highScore,t.winStreak);i(e)},onClickRestart:function(){var e=h(9,1,0,t.highScore,0);i(e)}})]})};s.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.133fd9a3.chunk.js.map